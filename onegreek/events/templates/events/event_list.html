{% extends 'base.html' %}
{% load crispy_forms_tags staticfiles %}

{% block content %}
<div ng-view></div>

<script type="text/ng-template" id="detail.html">
<h1>
    {[{ event.title }]}
    <small>
        {[{ event.start }]} -
        {[{ event.end }]}
    </small>
</h1>

<p>
    {[{ event.description }]}
</p>
    <form ng-controller="MyFormCtrl">
    {% csrf_token %}
    {% crispy event_form %}
    <button ng-click="submit()">Submit</button>
    </form>

</script>

<script type="text/ng-template" id="list.html">
    <form class="form-search">
        <div class="controls">
            <input type="text" id="event-filter" name="event-filter" class="search-query" placeholder="Search" ng-model="eventFilter" />
        </div>
    </form>
    <ul class="unstyled">
        <li ng-repeat="event in events | filter:eventFilter | orderBy:'start'">
            <h2>
                <a href="#/events/{[{ event.id }]}">
                    {[{ event.title }]}
                </a>
            </h2>
            <small>
                {[{ event.start | date }]} -
                {[{ event.end | date }]}
            </small>
            <p>{[{ event.description }]}</p>
        </li>
    </ul>
    <form ng-controller="MyFormCtrl">
    {% csrf_token %}
    {% crispy event_form %}
    <button ng-click="submit()">Submit</button>
    </form>
</script>



{% endblock content %}

{% block angular_app_name %}eventsApp{% endblock angular_app_name %}

{% block angular_modules %}
    <script src="{% static 'angularjs/app/lib/angular/angular-cookies.js' %}"></script>
    <script src="{% static 'angularjs/app/lib/angular/angular-resource.js' %}"></script>
    <script src="{% static 'angularjs/app/lib/angular/angular-route.js' %}"></script>
    <script src="{% static 'angularjs/app/lib/angular/angular-animate.js' %}"></script>
{% endblock angular_modules %}
{% block angular_app %}
    <script src="{% static 'events/app/js/app.js' %}"></script>
    <script src="{% static 'events/app/js/controllers.js' %}"></script>
    <script src="{% static 'events/app/js/services.js' %}"></script>
    <script src="{% static 'events/app/js/filters.js' %}"></script>
{% endblock angular_app %}
