{% extends 'base.html' %}
{% load crispy_forms_tags staticfiles %}
{% block left_content %}{% endblock left_content %}

{% block content %}

<div>
    <accordion>
        <accordion-group heading="Create New Event">
                {% csrf_token %}
                {% crispy event_form %}
            <div class="form-actions">
                <button ng-click="submit()">Submit</button>
            </div>
        </accordion-group>
    </accordion>

    <div class="row">
        <div class="span3">
    <form class="form-search">
        <div class="controls">
            <input type="text" id="event-filter" name="event-filter" class="search-query input-medium"
                   placeholder="Search" ng-model="eventFilter"  typeahead="event.title for event in events | filter:$viewValue | limitTo:8"/>
        </div>
    </form>
        <ul class="nav nav-pills nav-stacked">
            <li ng-repeat="event in events | filter:eventFilter | orderBy:'start'">
                    <a href="#/events/{[{ event.id }]}">
                        {[{ event.title }]}
                        <br/>
                <small>
                    {[{ event.start | date }]} -
                    {[{ event.end | date }]}
                </small>
                    </a>
            </li>
        </ul>


        </div>

        <div class="span9">
            <div ng-view></div>
        </div>
    </div>

    </div>
    <script type="text/ng-template" id="detail.html">
<h1>
    <span contentEditable="true">
    {[{ event.title }]}
    </span>
    <small>
    <span contentEditable="true">
                {[{ event.start | date }]}
    </span>
    -
    <span contentEditable="true">
                {[{ event.end | date }]}
    </span>
    </small>
</h1>

<p contentEditable="true">
    {[{ event.description }]}
</p>

</script>




{% endblock content %}

{% block angular_app_name %}eventsApp{% endblock angular_app_name %}

{% block angular_modules %}
    <script src="{% static 'angularjs/app/lib/angular/angular-cookies.js' %}"></script>
    <script src="{% static 'angularjs/app/lib/angular/angular-resource.js' %}"></script>
    <script src="{% static 'angularjs/app/lib/angular/angular-route.js' %}"></script>
    <script src="{% static 'angularjs/app/lib/angular/angular-animate.js' %}"></script>
{% endblock angular_modules %}
{% block angular_app %}
    <script src="{% static 'events/app/js/app.js' %}"></script>
    <script src="{% static 'events/app/js/controllers.js' %}"></script>
    <script src="{% static 'events/app/js/services.js' %}"></script>
    <script src="{% static 'events/app/js/directives.js' %}"></script>
    <script src="{% static 'events/app/js/filters.js' %}"></script>
{% endblock angular_app %}
