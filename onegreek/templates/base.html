{% load staticfiles i18n %}<!DOCTYPE html>
<html lang="en" ng-app="{% block angular_app_name %}panelApp{% endblock angular_app_name %}"
        {% block extra_html_tag_data %}{% endblock extra_html_tag_data %}>

<head>
    <meta charset="utf-8">
    <title>{% block title %}onegreek{% endblock title %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    {% block css %}
        <!-- Latest compiled and minified CSS -->
        <!-- link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/2.3.1/css/bootstrap.min.css" -->
        <!-- link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}" -->
        <!--link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-theme.min.css"-->
        <link href="{% static 'css/project.css' %}" rel="stylesheet">
        <link rel="stylesheet" href="{% static 'css/bootstrap.css' %}">

    {% endblock css %}

    {% block javascript %}
        <!-- Latest JQuery -->
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
        <script src="{% static 'js/jquery.min.js' %}"></script>
        <!-- Latest compiled and minified JavaScript -->
        <!--script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script-->
    {% endblock javascript %}

{% comment %}

    <link rel="stylesheet/less" href="{% static 'less/bootstrap.less' %}">
    <script type="text/javascript">
        less = {
            env: "development", // or "production"
            async: false,       // load imports async
            fileAsync: false,   // load imports async when in a page under
            // a file protocol
            poll: 1000,         // when in watch mode, time in ms between polls
            functions: {},      // user functions, keyed by name
            dumpLineNumbers: "comments", // or "mediaquery" or "all"
            relativeUrls: false,// whether to adjust url's to be relative
            // if false, url's are already relative to the
            // entry less file
            rootpath: ""// a path to add on to the start of every url
            //resource
        };
    </script>
    <script src="{% static 'js/less-1.5.1.min.js' %}"></script>
{% endcomment %}

    <script src="{% static 'js/holder.js' %}"></script>




    {% block angular %}
        {% block angular_core %}
            <!--script src="//ajax.googleapis.com/ajax/libs/angularjs/1.0.7/angular.min.js"></script-->
            <script src="{% static 'angularjs/app/lib/angular/angular.min.js' %}"></script>
        {% endblock angular_core %}
        {% block angular_ext %}
            <script src="{% static 'angularjs/app/lib/bootstrap/ui-bootstrap-tpls-0.6.0.js' %}"></script>
        {% endblock angular_ext %}
        {% block angular_modules %}
            <script src="{% static 'angularjs/app/lib/angular/angular-cookies.js' %}"></script>
            <script src="{% static 'angularjs/app/lib/angular/angular-resource.js' %}"></script>
            <script src="{% static 'angularjs/app/lib/angular/angular-route.js' %}"></script>
            <script src="{% static 'angularjs/app/lib/angular/angular-animate.js' %}"></script>
        {% endblock angular_modules %}
    {% endblock angular %}
</head>

<body {% block extra_body_tag_data %}{% endblock extra_body_tag_data %}>

{% block header_navbar %}
{% endblock header_navbar %}

{% block user_panel %}
    {% load avatar_tags i18n %}
    <div class="panel">
        {% if request.user.is_authenticated %}

            <div class="">
                <div class="span3">
                    <a class="" ng-click="isCollapsed = !isCollapsed">
                        <img class="thumbnail pull-left" src="{{ request.user.profile_image_url }}">
                        {% with request.user as user %}
                            <ul class="unstyled inline">
                                <li>
                                    {{ user.get_full_name }} <br/>
                                </li>
                                <li>
                                    {{ user.status|title }}{% if user.status != 'rush' %} -
                                        {{ user.chapter.fraternity.title }}{% endif %}
                                </li>
                            </ul>
                            </a>

                        {% endwith %}

                </div>
                <div collapse="!isCollapsed">

                    <div class="span2">

                        <ul class="nav nav-list">
                            <li class="nav-header">Account</li>
                            <li><a href="{% url 'users:detail' request.user.id %}">{% trans "Profile" %}</a></li>
                            <li><a href="{% url 'account_logout' %}">{% trans "Logout" %}</a></li>
                        </ul>
                    </div>

                    {% if request.user.is_staff %}
                    <div class="span2">
                        <ul class="nav nav-list">
                                <li class="nav-header">Admin</li>
                                <li><a href="{% url 'api-root' %}">API</a></li>
                                <li><a href="/admin/">Admin</a></li>
                        </ul>
                    </div>
                    {% endif %}

                    <div class="span2">
                        <ul class="nav nav-list">
                            <li class="nav-header">Chapter</li>
                            {% if request.user.chapter and request.user.fraternity %}
                                <li>
                                    <a href="{% url 'chapters:detail' request.user.chapter_id %}"
                                       title="{{ request.user.fraternity.title }}">Profile</a>
                                </li>
                                <li><a href="{% url 'events:list' %}">Events</a></li>
                            {% endif %}
                            {% if request.user.is_chapter_admin %}
                                <li><a href="{% url 'users:list' %}">Members</a></li>
                                <li><a href="{% url 'chapters:update' request.user.chapter_id %}">Edit</a></li>
                            {% endif %}
                        </ul>
                    </div>
                    <div class="span2">
                        <ul class="nav nav-list">
                            <li class="nav-header">Images</li>
                            <li><a href="{% url 'imagestore:upload' %}">Upload</a></li>
                            <li><a href="{% url 'imagestore:user' request.user.id %}">Albums</a></li>
                            <li><a href="{% url 'imagestore:user-images' request.user.id %}">Images</a></li>
                        </ul>
                    </div>
                    <div class="span2">
                        <ul class="nav nav-list">
                            <li class="nav-header">Community</li>
                            <li><a href="{% url 'chapters:list' %}">Chapters</a></li>
                            <li><a href="{% url 'events:list' %}">Events</a></li>
                        </ul>
                    </div>
                </div>

            </div>
            </div>


            <div class="clearfix"></div>
        {% else %}
            <li><a href="{% url 'account_login' %}">{% trans "Log In" %}</a></li>
        {% endif %}

{% endblock user_panel %}



{% block header_top %}{% endblock header_top %}


<div class="container top-bar"></div>
<div class="container page-wrapper">
    {% if messages %}
        <div class="row">
            {% for message in messages %}
                <div data-alert class="alert alert-box radius {{ message.tags }}">
                    {{ message }}
                </div><!-- .alert-box -->
            {% endfor %}
        </div><!-- .row -->
    {% endif %}
<div class="pull-right">
    {% block breadcrumb %}
    {% endblock breadcrumb %}
</div>
    {% block header_content %}{% endblock header_content %}
    <div class="row">
        <div class="left-column">
            {% block left_content %}
            {% endblock left_content %}
        </div>

        {% block content %}
        {% endblock content %}
    </div>
<div class="row">
    {% block content-related %}
    {% endblock content-related %}
</div>

</div>
<!-- /container -->

{% block modal %}{% endblock modal %}

<!-- Le javascript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->

{% block angular_app %}
{% endblock angular_app %}
<script>

    angular.module('panelApp', [
        'ui.bootstrap']);
    function CollapseNavCtrl($scope) {
        $scope.isCollapsed = false;
        console.log($scope.isCollapsed);
    }
</script>

</body>
</html>
 